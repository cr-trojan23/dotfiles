var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,o){return e==Array.prototype||e==Object.prototype||(e[t]=o.value),e},$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var o=e[t];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,t){var o=$jscomp.propertyToPolyfillSymbol[t];return null!=o&&void 0!==(o=e[o])?o:e[t]};$jscomp.polyfill=function(e,t,o,n){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,t,o,n):$jscomp.polyfillUnisolated(e,t,o,n))},$jscomp.polyfillUnisolated=function(e,t,o,n){for(o=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var r=e[n];if(!(r in o))return;o=o[r]}(t=t(n=o[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(o,e,{configurable:!0,writable:!0,value:t})},$jscomp.polyfillIsolated=function(e,t,o,n){var r=e.split(".");e=1===r.length,n=r[0],n=!e&&n in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var s=0;s<r.length-1;s++){var i=r[s];if(!(i in n))return;n=n[i]}r=r[r.length-1],null!=(t=t(o=$jscomp.IS_SYMBOL_NATIVE&&"es6"===o?n[r]:null))&&(e?$jscomp.defineProperty($jscomp.polyfills,r,{configurable:!0,writable:!0,value:t}):t!==o&&(void 0===$jscomp.propertyToPolyfillSymbol[r]&&(o=1e9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[r]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(r):$jscomp.POLYFILL_PREFIX+o+"$"+r),$jscomp.defineProperty(n,$jscomp.propertyToPolyfillSymbol[r],{configurable:!0,writable:!0,value:t})))},$jscomp.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.generator={},$jscomp.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},$jscomp.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1},$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},$jscomp.generator.Context.prototype.next_=function(e){this.yieldResult=e},$jscomp.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},$jscomp.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},$jscomp.generator.Context.prototype.yieldAll=function(e,t){var o=$jscomp.makeIterator(e),e=o.next();if($jscomp.generator.ensureIteratorResultIsObject_(e),!e.done)return this.yieldAllIterator_=o,this.yield(e.value,t);this.yieldResult=e.value,this.nextAddress=t},$jscomp.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},$jscomp.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},$jscomp.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},$jscomp.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},$jscomp.generator.Context.prototype.enterFinallyBlock=function(e,t,o){o?this.finallyContexts_[o]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},$jscomp.generator.Context.prototype.leaveFinallyBlock=function(e,t){t=this.finallyContexts_.splice(t||0)[0];if(t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},$jscomp.generator.Context.prototype.forIn=function(e){return new $jscomp.generator.Context.PropertyIterator(e)},$jscomp.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},$jscomp.generator.Engine_=function(e){this.context_=new $jscomp.generator.Context,this.program_=e},$jscomp.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.yieldAllStep_=function(e,t,o){try{var n=e.call(this.context_.yieldAllIterator_,t);if($jscomp.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var r=n.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,o.call(this.context_,r),this.nextStep_()},$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},$jscomp.generator.Generator_=function(t){this.next=function(e){return t.next_(e)},this.throw=function(e){return t.throw_(e)},this.return=function(e){return t.return_(e)},this[Symbol.iterator]=function(){return this}},$jscomp.generator.createGenerator=function(e,t){t=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(t));return $jscomp.setPrototypeOf&&e.prototype&&$jscomp.setPrototypeOf(t,e.prototype),t},$jscomp.asyncExecutePromiseGenerator=function(t){function r(e){return t.next(e)}function s(e){return t.throw(e)}return new Promise(function(o,n){!function e(t){t.done?o(t.value):Promise.resolve(t.value).then(r,s).then(e,n)}(t.next())})},$jscomp.asyncExecutePromiseGeneratorFunction=function(e){return $jscomp.asyncExecutePromiseGenerator(e())};var isDebug=!($jscomp.asyncExecutePromiseGeneratorProgram=function(e){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e)))}),manifest=chrome.runtime.getManifest();function encodeQueryData(e){var t,o=[];for(t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")}function injectJs(e){try{var t=document.createElement("script");t.type="text/javascript",t.src=e,(document.head||document.body||document.documentElement).appendChild(t)}catch(e){isDebug&&console.log(e)}}function injectMeta(e,t){var o=document.createElement("meta");o.name=e,o.content=t,document.getElementsByTagName("head")[0].appendChild(o)}function injectCSS(e,t){var o;null===document.getElementById(e)&&((o=document.createElement("link")).rel="stylesheet",o.type="text/css",o.id=e,o.href="data:text/css;charset=UTF-8,"+encodeURIComponent(t),(document.head||document.body||document.documentElement).appendChild(o))}function getLocalStorageValue(n){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(new Promise(function(t,o){try{chrome.storage.local.get(n,function(e){t(e[n])})}catch(e){o(e)}}))})}function initDragElement(){function e(e){(c=this.parentPopup).style.zIndex=""+ ++u,e=e||window.event,i=e.clientX,a=e.clientY,document.onmouseup=o,document.onmousemove=t}function t(e){c&&(e=e||window.event,r=i-e.clientX,s=a-e.clientY,i=e.clientX,a=e.clientY,c.style.top=c.offsetTop-s+"px",c.style.left=c.offsetLeft-r+"px")}function o(){document.onmouseup=null,document.onmousemove=null}for(var n,r=0,s=0,i=0,a=0,l=document.getElementsByClassName("call-popup"),c=null,u=1e3,d=0;d<l.length;d++){var p=l[d],m=1===(n=(n=p).getElementsByClassName("call-popup-header")).length?n[0]:null;p.onmousedown=function(){this.style.zIndex=""+ ++u},m&&(m.parentPopup=p,m.onmousedown=e)}}function initResizeElement(){function e(e){l=this.parentPopup,n=e.clientX,r=e.clientY,s=parseInt(document.defaultView.getComputedStyle(l).width,10),i=parseInt(document.defaultView.getComputedStyle(l).height,10),document.documentElement.addEventListener("mousemove",t,!1),document.documentElement.addEventListener("mouseup",o,!1)}function t(e){l.style.width=s+e.clientX-n+"px",l.style.height=i+e.clientY-r+"px"}function o(){document.documentElement.removeEventListener("mousemove",t,!1),document.documentElement.removeEventListener("mouseup",o,!1)}for(var n,r,s,i,a=document.getElementsByClassName("call-popup"),l=null,c=0;c<a.length;c++){var u=a[c],d=document.createElement("div");d.className="resizer-right",u.appendChild(d),d.addEventListener("mousedown",e,!1),d.parentPopup=u,(d=document.createElement("div")).className="resizer-bottom",u.appendChild(d),d.addEventListener("mousedown",e,!1),d.parentPopup=u,(d=document.createElement("div")).className="resizer-both",u.appendChild(d),d.addEventListener("mousedown",e,!1),d.parentPopup=u}}injectJs(chrome.extension.getURL("/src/js/lib.js?v="+manifest.version)),injectMeta("wawp-ex-id",chrome.runtime.id),injectMeta("wawp-ex-ui",chrome.i18n.getUILanguage()),injectMeta("wawp-ex-ver",manifest.version),chrome.runtime.onMessage.addListener(function(e,t,o){return isDebug&&console.log("request called in content",e),"reInitValue"==e.action?window.dispatchEvent(new CustomEvent("reInitValue",{detail:{parameter:e.parameter,value:e.value}})):"aP"==e.action?window.dispatchEvent(new CustomEvent("aP",{detail:{product:e.product,time:e.time,users:e.users,expiration:e.expiration,numbers:e.numbers,show:e.show}})):"dP"==e.action&&window.dispatchEvent(new CustomEvent("dP",{detail:{product:e.product,time:e.time,status:e.status,users:e.users,expiration:e.expiration,numbers:e.numbers,show:e.show}})),o(),!0}),window.addEventListener("getUnreadMessages",function(e){chrome.runtime.sendMessage({type:"setUnreadMessages",messages:e.detail})},!1),window.addEventListener("enableDebug",function(e){isDebug=!0},!1),window.addEventListener("disableDebug",function(e){isDebug=!1},!1),window.addEventListener("setTargetIndex",function(e){chrome.runtime.sendMessage({type:"setBadgeText",title:e.detail,color:"red"})},!1),window.addEventListener("setBadgeText",function(e){chrome.runtime.sendMessage({type:"setBadgeText",title:e.detail.text,color:e.detail.color})},!1),window.addEventListener("getServerValues",function(e){chrome.runtime.sendMessage({type:"getServerValues"})},!1),window.addEventListener("getCRMLists",function(e){chrome.runtime.sendMessage({type:"getCRMLists",software:e.detail.software,key:e.detail.key})},!1),window.addEventListener("getCRMContacts",function(e){chrome.runtime.sendMessage({type:"getCRMContacts",software:e.detail.software,list:e.detail.list,key:e.detail.key})},!1),window.addEventListener("saveContact",function(e){chrome.runtime.sendMessage({type:"saveContact",target:e.detail.target,software:e.detail.software,name:e.detail.name,phone:e.detail.phone,key:e.detail.key})},!1),window.addEventListener("saveSettings",function(n){try{(n.detail.value||"").forEach(function(e){for(var t in e){var o={};chrome.storage.local.set((o[n.detail.key+"_"+t]=e[t],o))}}),isDebug&&console.log("settings passed succesfully to content and saved",n.detail.key,n.detail.value)}catch(e){isDebug&&console.log(e)}},!1),window.addEventListener("getSettings",function(e){chrome.storage.local.get(null,function(e){e=new CustomEvent("restoreSettings",{detail:e}),window.dispatchEvent(e)})},!1),window.addEventListener("validateLicenseCode",function(t){isDebug&&console.log("validateLicenseCode",t.detail),chrome.storage.local.set({key:t.detail.key},function(){var e=new CustomEvent("getProducts",{detail:{key:t.detail.key,user:t.detail.user,referrer:t.detail.referrer,first:!0}});window.dispatchEvent(e)})},!1),window.addEventListener("deleteLicense",function(e){isDebug&&console.log("License removed"),chrome.storage.local.remove("key")},!1),window.addEventListener("saveReference",function(e){chrome.runtime.sendMessage({type:"saveReference",obj:e.detail})},!1),window.addEventListener("triggerWebhook",function(t){chrome.runtime.sendMessage({type:"triggerWebhook",method:t.detail.webhook.method,endpoint:t.detail.webhook.endpoint,params:encodeQueryData(t.detail.data)},function(e){isDebug&&console.log("webhook response:",e),e=e.isError?new CustomEvent("notifyWebhookError",{detail:e.response}):new CustomEvent("sendMessage",{detail:{message:t.detail.data.m_serialized,reply:t.detail.data.m_reply,chat:t.detail.data.m_chat,text:e,quote:t.detail.data.m_quote}}),window.dispatchEvent(e)})},!1),window.addEventListener("initFirebase",function(t){var o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),o={apiKey:t.detail.settings.api,authDomain:t.detail.settings.project+".firebaseapp.com",databaseURL:t.detail.settings.database||"https://"+t.detail.settings.project+".firebaseio.com",projectId:t.detail.settings.project,storageBucket:t.detail.settings.project+".appspot.com"},isDebug&&console.log("initFirebase",o),firebase.apps.length?e.yield(firebase.app().delete(),4):e.jumpTo(4)):2!=e.nextAddress?(firebase.initializeApp(o),t.detail.nodes.forEach(function(e){firebase.database().ref(e).on("child_added",function(t){isDebug&&console.log(t.val()),t.val()&&firebase.database().ref(e+"/"+t.ref.key).remove().then(function(){var e=new CustomEvent("sendMessageFromFirebase",{detail:{phone:t.val().phone,group:t.val().group,content:t.val().content,type:t.val().type||"text",name:t.val().name||"",text:t.val().text||""}});window.dispatchEvent(e),isDebug&&console.log("firebase message removed")}).catch(function(){console.error("Firebase Error: database rules dont allow writing/deleting. For your safety, we will not send the message because it will cause an infinite loop. To stop this loop, please reconfigure your database rules to allow writing and refresh this page.")})})}),e.leaveTryBlock(0)):(o=e.enterCatchBlock(),isDebug&&console.error("Firebase Error",o),void e.jumpToEnd())})},!1),window.addEventListener("fetchFile",function(o){isDebug&&console.log("fetchFile:",o);try{fetch(o.detail.url).then(function(e){return e.blob()}).then(function(e){var t=new FileReader;t.onload=function(){isDebug&&console.log(this.result);var e=new CustomEvent("sendMessageFromFirebase",{detail:{phone:o.detail.phone,content:this.result,type:"media",name:"image.jpeg",text:o.detail.text||""}});window.dispatchEvent(e)},t.readAsDataURL(e)})}catch(e){isDebug&&console.log("fetchFile:",e)}},!1),window.addEventListener("buyProduct",function(e){var t=e.detail.product||"",o=e.detail.referrer||"";isDebug&&console.log("buyProduct",e.detail),(e=document.createElement("a")).setAttribute("href","https://wawplus.com/?subscribe="+t+(o?"&af="+o:"")),e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),setTimeout(function(){document.querySelector(".enter-license").click()},3e3)},!1),window.addEventListener("orderDetails",function(e){var t;isDebug&&console.log("orderDetails response:",e.detail),e.detail.order?(t=btoa(e.detail.order.subscription_id),window.location.href="javascript:alerty.prompt('"+chrome.i18n.getMessage("thank_you_for_subscribing")+"',{inputType: 'text', cancelLabel: '"+chrome.i18n.getMessage("close")+"',title: '"+chrome.i18n.getMessage("license_key")+"',inputValue: '"+t+"'});",chrome.storage.local.set({key:t},function(){window.dispatchEvent(new CustomEvent("aP",{detail:{product:product,time:t}}))})):document.querySelector(".enter-license").click()},!1),window.addEventListener("getProducts",function(t){var o,n,r,s;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return isDebug&&console.log(t.detail),o=t.detail.user||"",n=t.detail.referrer||"",r=t.detail.first||!1,e.yield(getLocalStorageValue("key"),2);if(s=e.yieldResult||t.detail.key){isDebug&&console.log("key found, checking server for a stand alone license",s);try{s=atob(s),chrome.runtime.sendMessage({type:"validateLicense",key:s,source:"key",user:o,referrer:n,first:r})}catch(e){isDebug&&console.log("could not decrypt key",s),chrome.storage.local.remove("key"),window.location.href="javascript:aM('something_is_wrong_with_your_license_key')"}}e.jumpToEnd()})},!1);