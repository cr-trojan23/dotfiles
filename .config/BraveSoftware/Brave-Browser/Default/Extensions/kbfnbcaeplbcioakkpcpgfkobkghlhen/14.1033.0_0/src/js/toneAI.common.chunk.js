(self.webpackChunk=self.webpackChunk||[]).push([[7725],{60797:(e,t,n)=>{n.d(t,{cp:()=>a,oA:()=>A});var i=n(5114),r=n(66310),l=n(40151),s=n(76974),o=n(28043);function a(e){return r.w(i.fold((function(){return l.E}),e))}var A=a(s.of);o.x((function(e,t){return i.isNone(e)&&i.isNone(t)||i.isSome(e)&&i.isSome(t)}))},72311:(e,t,n)=>{n.r(t),n.d(t,{ToneAIFeature:()=>C});var i=n(40327),r=n(17404),l=n(90361),s=n(40018),o=n(44586),a=n(14601),A=n(85985),u=n(77176),d=n(78674),p=n(93508),c=n(16118),T=n(41398),b=n(60797),I=n(17594),g=n(15646),h=n(75316),v=n(35416),_=n(83078),w=n(5114);class C{constructor(e,t){this._alertStateService=e,this._gnar=t}initCardActionsProcessing(e,t,n,l,s){return new o.y((()=>{const o=new a.w;o.add(this._alertStateService.newlyHighlightedAlerts.pipe(A.h(r.S.isToneAIAlert)).subscribe((e=>this._gnar.toneAIAlertUnderlineShow(C._getToneRewriteType(e))))),o.add(C._getToneAIAlertObservable(l.pipe(A.h(h.C.isToneAIItem),u.U((e=>e.activeAlert.id))),t).subscribe((e=>this._gnar.toneAIAssistantMiniCardShow(C._getToneRewriteType(e))))),o.add(C._getToneAIAlertObservable(e.pipe(A.h(g.lY.isAlertCardShow),u.U((e=>e.alertId))),t).pipe(d.b(300)).subscribe((e=>this._gnar.toneAIAssistantFullCardShow(C._getToneRewriteType(e))))),o.add(C._getToneAIAlertObservable(e.pipe(A.h(g.lY.isAlertApplyAction),u.U((e=>e.alertId))),t).subscribe((e=>this._gnar.toneAIAssistantFullCardReplacementApply(C._getToneRewriteType(e))))),C._subscribeToMuteOrUndoMuteButtonClick(o,e,n,t,g.lY.isMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardMuteButtonClick(C._getToneRewriteType(e)))),C._subscribeToMuteOrUndoMuteButtonClick(o,e,n,t,g.lY.isUndoMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardUndoMuteButtonClick(C._getToneRewriteType(e)))),o.add(C._getToneAIAlertObservable(s.pipe(A.h(I.$.isToneAI),u.U((e=>e.id))),t).subscribe((e=>this._gnar.toneAIAlertUnderlineClick(C._getToneRewriteType(e)))));const b=e.pipe(A.h(g.lY.isToneAIChangeToneAlternativeAction));return o.add(b.pipe(p.O(null),c.G(),A.h((([e,t])=>(null==e?void 0:e.selectedToneAlternativeIdx)!==(null==t?void 0:t.selectedToneAlternativeIdx))),u.U((([e,t])=>{var n,i;return{oldToneAlternativeIdx:null!==(n=null==e?void 0:e.selectedToneAlternativeIdx)&&void 0!==n?n:null,newToneAlternativeIdx:null!==(i=null==t?void 0:t.selectedToneAlternativeIdx)&&void 0!==i?i:null}})),T.M(C._getToneAIAlertObservable(b.pipe(u.U((e=>e.alertId))),t))).subscribe((([{oldToneAlternativeIdx:e,newToneAlternativeIdx:t},n])=>(0,i.pipe)(n.extraProperties.toneAI,_.tap((i=>{this._gnar.toneAIAssistantFullCardSliderMove(C._getToneRewriteType(n),null!==e?i.toneAlternatives[e].name:"",null!==t?i.toneAlternatives[t].name:"")})))))),o.add(C._getToneAIAlertObservable(e.pipe(A.h(g.lY.isAlertIgnoreAction),u.U((e=>e.alertId))),t).subscribe((e=>this._gnar.toneAIAssistantFullCardDismissButtonClick(C._getToneRewriteType(e))))),()=>o.unsubscribe()}))}static _getToneRewriteType(e){return`${e.patternName.split("/").slice(2).join("/")}${e.patternNameQualifier?`_${e.patternNameQualifier}`:""}`}static _subscribeToMuteOrUndoMuteButtonClick(e,t,n,r,s,o){e.add(C._getToneAIAlertObservable(t.pipe(A.h(s),T.M(n),u.U((([e,t])=>v.nL.hasItems(t)?(0,i.pipe)(t.currentLens.items.get(e.id),w.fold((()=>null),(e=>e.value))):null)),A.h(l.fQ),A.h(h.C.isToneAIItem),u.U((e=>e.activeAlert.id))),r).subscribe(o))}static _getToneAIAlertObservable(e,t){return e.pipe(u.U(t.getById),b.oA,A.h(s.bZ.isToneAI))}}}}]);